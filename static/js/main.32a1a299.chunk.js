(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(28),i=n.n(c),s=(n(95),n(15)),l=n(12),o=n(182),j=n(183),u=n(172),d=n(76),h=n.n(d),b=100,O="http://localhost:3004/people";function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={method:t};return n&&(a.body=JSON.stringify(n),a.headers={"Content-Type":"application/json; charset=UTF-8"}),fetch(O+e,a).then((function(e){if(!e.ok)throw new Error("error with db ".concat(e.statusText));return e.json()}))}var m=function(e){return x(e)},p=function(e,t){return x(e,"POST",t)},f=(n(99),n(170)),g=n(164),v=n(167),y=n(168),_=n(161),S=n(165),C=n(166),N=n(163),w=n(1),E=function(e){var t=e.addUser,n=Object(a.useState)(""),r=Object(l.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(""),o=Object(l.a)(s,2),j=o[0],d=o[1],h=Object(a.useState)(""),b=Object(l.a)(h,2),O=b[0],x=b[1],m=Object(a.useState)(""),E=Object(l.a)(m,2),k=E[0],T=E[1],D=Object(a.useState)(""),M=Object(l.a)(D,2),P=M[0],B=M[1],G=Object(a.useState)(!1),U=Object(l.a)(G,2),A=U[0],F=U[1],I=Object(a.useState)(!1),J=Object(l.a)(I,2),L=J[0],W=J[1],z=function(e,t){"clickaway"!==t&&F(!1)},H=""!==c&&""!==j&&""!==P&&""!==O&&""!==k&&/\S+@\S+\.\S+/.test(k),X=""!==c||""!==j||""!==P||""!==O||""!==k,q=function(){i(""),d(""),x(""),T(""),B("")};return Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)(f.a,{sx:{m:2},type:"button",variant:"contained",onClick:function(){return W((function(e){return!e}))},children:L?"Cancel adding users":"Add new user"}),L&&Object(w.jsxs)("div",{className:"userData",children:[Object(w.jsx)(u.a,{variant:"h6",gutterBottom:!0,children:"Please, fill in the info about yourself:"}),Object(w.jsx)("div",{className:"userData__input",children:Object(w.jsx)(g.a,{error:""===c,id:"outlined-error",type:"text",label:"Name",helperText:"Enter your name",placeholder:"Name",value:c,onChange:function(e){return i(e.target.value)}})}),Object(w.jsx)("div",{className:"userData__input",children:Object(w.jsx)(g.a,{error:""===j,id:"outlined-error",type:"text",label:"Last Name",placeholder:"Last Name",helperText:"Enter your last name",value:j,onChange:function(e){return d(e.target.value)}})}),Object(w.jsx)("div",{className:"userData__input",children:Object(w.jsx)(g.a,{error:""===O,id:"outlined-error",type:"text",label:"Phone",placeholder:"Phone",helperText:"Enter your phone number",value:O,onChange:function(e){return x(e.target.value)}})}),Object(w.jsx)("div",{className:"userData__input",children:Object(w.jsx)("div",{children:Object(w.jsx)(g.a,{error:""===k||!/\S+@\S+\.\S+/.test(k),id:"outlined-error",type:"email",label:"Email",placeholder:"Email",helperText:"Enter your e-mail",value:k,onChange:function(e){return T(e.target.value)}})})}),Object(w.jsx)("div",{className:"userData__input",children:Object(w.jsxs)(v.a,{sx:{m:1,minWidth:120},children:[Object(w.jsx)(y.a,{id:"demo-simple-select-helper-label",children:"Gender"}),Object(w.jsxs)(_.a,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",error:""===P,value:P,label:"Gender",onChange:function(e){return B(e.target.value)},children:[Object(w.jsx)(S.a,{value:"",children:"Chose your gender"}),Object(w.jsx)(S.a,{value:"M",children:"Male"}),Object(w.jsx)(S.a,{value:"F",children:"Female"})]})]})}),Object(w.jsxs)("div",{children:[Object(w.jsx)(f.a,{sx:{m:2},variant:"contained",disabled:!H,onClick:function(e){e.preventDefault(),p("/",{first_name:c,last_name:j,phone:O,email:k,gender:P}).then((function(e){return t(e)})),q(),F(!0)},children:"Add user"}),Object(w.jsx)(f.a,{sx:{m:2},type:"submit",variant:"outlined",onClick:q,disabled:!X,children:"Clear form"}),Object(w.jsx)(C.a,{open:A,autoHideDuration:6e3,onClose:z,children:Object(w.jsx)(N.a,{onClose:z,severity:"success",sx:{width:"100%"},children:"The new User was successfully added!"})})]})]})]})},k=n(177),T=n(181),D=n(180),M=n(176),P=n(178),B=n(179),G=n(175),U=function(e){var t=e.users;var n=[];return t.forEach((function(e){var t,a,r,c,i,s;n.push((t=e.id,a=e.first_name,r=e.last_name,c=e.phone,i=e.email,s=e.gender,{id:t,first_name:a,last_name:r,phone:c,email:i,gender:s}))})),Object(w.jsx)("div",{className:"container",children:Object(w.jsx)(M.a,{component:G.a,elevation:3,children:Object(w.jsxs)(k.a,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[Object(w.jsx)(P.a,{children:Object(w.jsxs)(B.a,{children:[Object(w.jsx)(D.a,{children:"Number"}),Object(w.jsx)(D.a,{align:"right",children:"Name"}),Object(w.jsx)(D.a,{align:"right",children:"Lastname"}),Object(w.jsx)(D.a,{align:"right",children:"Phone"}),Object(w.jsx)(D.a,{align:"right",children:"E-mail"}),Object(w.jsx)(D.a,{align:"right",children:"Gender"})]})}),Object(w.jsx)(T.a,{children:n.map((function(e){return Object(w.jsxs)(B.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(w.jsx)(D.a,{component:"th",scope:"row",children:e.id}),Object(w.jsx)(D.a,{align:"right",children:e.first_name}),Object(w.jsx)(D.a,{align:"right",children:e.last_name}),Object(w.jsx)(D.a,{align:"right",children:e.phone}),Object(w.jsx)(D.a,{align:"right",children:e.email}),Object(w.jsx)(D.a,{align:"right",children:e.gender})]},e.id)}))})]})})})},A=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),d=i[0],x=i[1],p=Object(a.useState)(0),f=Object(l.a)(p,2),g=f[0],v=f[1],y=Object(a.useState)(!1),_=Object(l.a)(y,2),S=_[0],C=_[1],N=Object(a.useCallback)((function(e){r((function(t){return[].concat(Object(s.a)(t),[e])}))}),[]);return Object(a.useEffect)((function(){fetch("".concat(O,"?_page=",1,"&_limit=").concat(b)).then((function(e){if(!e.ok)throw new Error("error with db ".concat(e.statusText));var t=Number(e.headers.get("X-Total-Count"));C(t>g*b)})).catch((function(e){return x(e)}))}),[g]),Object(w.jsxs)("main",{className:"section",children:[Object(w.jsx)(E,{addUser:N}),""===d?Object(w.jsxs)(h.a,{pageStart:1,loadMore:function(){m("?_page=".concat(g+1,"&_limit=").concat(b)).then((function(e){r((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e))}))})).catch((function(e){return x(e)})).finally((function(){return v((function(e){return e+1}))}))},hasMore:S,loader:Object(w.jsx)(o.a,{sx:{display:"flex",margin:"20px",alignItems:"center",justifyContent:"center"},children:Object(w.jsx)(j.a,{})},"".concat(g*b)),children:[Object(w.jsx)(u.a,{variant:"h6",gutterBottom:!0,children:"All our fake users:"}),Object(w.jsx)(U,{users:n})]}):Object(w.jsxs)(u.a,{variant:"h5",gutterBottom:!0,children:["Error:",d]})]})};i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(A,{})}),document.getElementById("root"))},95:function(e,t,n){},99:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.32a1a299.chunk.js.map