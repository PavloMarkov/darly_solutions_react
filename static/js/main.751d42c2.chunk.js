(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),i=a.n(c),s=(a(95),a(15)),l=a(12),o=a(182),j=a(183),u=a(172),d=a(76),h=a.n(d),b=100,O="http://localhost:3004/people";function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={method:t};return a&&(n.body=JSON.stringify(a),n.headers={"Content-Type":"application/json; charset=UTF-8"}),fetch(O+e,n).then((function(e){if(!e.ok)throw new Error("error with db ".concat(e.statusText));return e.json()}))}var m=function(e){return x(e)},p=function(e,t){return x(e,"POST",t)},f=(a(99),a(170)),g=a(164),v=a(167),y=a(168),_=a(161),S=a(165),C=a(166),N=a(163),w=a(1),E=function(e){var t=e.addUser,a=Object(n.useState)(""),r=Object(l.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(""),o=Object(l.a)(s,2),j=o[0],d=o[1],h=Object(n.useState)(""),b=Object(l.a)(h,2),O=b[0],x=b[1],m=Object(n.useState)(""),E=Object(l.a)(m,2),k=E[0],T=E[1],A=Object(n.useState)(""),D=Object(l.a)(A,2),z=D[0],Z=D[1],M=Object(n.useState)(!1),P=Object(l.a)(M,2),B=P[0],G=P[1],U=Object(n.useState)(!1),F=Object(l.a)(U,2),I=F[0],J=F[1],L=function(e,t){"clickaway"!==t&&G(!1)},W=/\S+@\S+\.\S+/.test(k),$=/\(?(\d{3})\)?[-\.\s]?(\d{3})[-\.\s]?(\d{4})/.test(O),H=""!==z,X=/(^[a-zA-Z][a-zA-Z\s]{0,20}[a-zA-Z]$)/.test(c),q=/(^[a-zA-Z][a-zA-Z\s]{0,20}[a-zA-Z]$)/.test(j),K=X&&q&&H&&$&&W,Q=""!==c||""!==j||H||""!==O||""!==k,R=function(){i(""),d(""),x(""),T(""),Z("")};return Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)(f.a,{sx:{m:2},type:"button",variant:"contained",onClick:function(){return J((function(e){return!e}))},children:I?"Cancel adding users":"Add new user"}),I&&Object(w.jsxs)("div",{className:"userData",children:[Object(w.jsx)(u.a,{variant:"h6",gutterBottom:!0,children:"Please, fill in the info about yourself:"}),Object(w.jsx)("div",{className:"userData__input",children:Object(w.jsx)(g.a,{error:!X,id:"outlined-error",type:"text",label:"Name",helperText:"Enter your name",placeholder:"Name",value:c,onChange:function(e){return i(e.target.value)}})}),Object(w.jsx)("div",{className:"userData__input",children:Object(w.jsx)(g.a,{error:!q,id:"outlined-error",type:"text",label:"Last Name",placeholder:"Last Name",helperText:"Enter your last name",value:j,onChange:function(e){return d(e.target.value)}})}),Object(w.jsx)("div",{className:"userData__input",children:Object(w.jsx)(g.a,{error:!$,id:"outlined-error",type:"text",label:"Phone",placeholder:"Phone",helperText:"Enter your phone number",value:O,onChange:function(e){return x(e.target.value)}})}),Object(w.jsx)("div",{className:"userData__input",children:Object(w.jsx)(g.a,{error:!W,id:"outlined-error",type:"email",label:"Email",placeholder:"Email",helperText:"Enter your e-mail",value:k,onChange:function(e){return T(e.target.value)}})}),Object(w.jsx)("div",{className:"userData__input",children:Object(w.jsxs)(v.a,{sx:{m:1,minWidth:120},children:[Object(w.jsx)(y.a,{id:"demo-simple-select-helper-label",children:"Gender"}),Object(w.jsxs)(_.a,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",error:!H,value:z,label:"Gender",onChange:function(e){return Z(e.target.value)},children:[Object(w.jsx)(S.a,{value:"",children:"Chose your gender"}),Object(w.jsx)(S.a,{value:"M",children:"Male"}),Object(w.jsx)(S.a,{value:"F",children:"Female"})]})]})}),Object(w.jsxs)("div",{children:[Object(w.jsx)(f.a,{sx:{m:2},variant:"contained",disabled:!K,onClick:function(e){e.preventDefault(),p("/",{first_name:c,last_name:j,phone:O,email:k,gender:z}).then((function(e){return t(e)})),R(),G(!0)},children:"Add user"}),Object(w.jsx)(f.a,{sx:{m:2},type:"submit",variant:"outlined",onClick:R,disabled:!Q,children:"Clear form"}),Object(w.jsx)(C.a,{open:B,autoHideDuration:6e3,onClose:L,children:Object(w.jsx)(N.a,{onClose:L,severity:"success",sx:{width:"100%"},children:"The new User was successfully added!"})})]})]})]})},k=a(177),T=a(181),A=a(180),D=a(176),z=a(178),Z=a(179),M=a(175),P=function(e){var t=e.users;var a=[];return t.forEach((function(e){var t,n,r,c,i,s;a.push((t=e.id,n=e.first_name,r=e.last_name,c=e.phone,i=e.email,s=e.gender,{id:t,first_name:n,last_name:r,phone:c,email:i,gender:s}))})),Object(w.jsx)("div",{className:"container",children:Object(w.jsx)(D.a,{component:M.a,elevation:3,children:Object(w.jsxs)(k.a,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[Object(w.jsx)(z.a,{children:Object(w.jsxs)(Z.a,{children:[Object(w.jsx)(A.a,{children:"Number"}),Object(w.jsx)(A.a,{align:"right",children:"Name"}),Object(w.jsx)(A.a,{align:"right",children:"Lastname"}),Object(w.jsx)(A.a,{align:"right",children:"Phone"}),Object(w.jsx)(A.a,{align:"right",children:"E-mail"}),Object(w.jsx)(A.a,{align:"right",children:"Gender"})]})}),Object(w.jsx)(T.a,{children:a.map((function(e){return Object(w.jsxs)(Z.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(w.jsx)(A.a,{component:"th",scope:"row",children:e.id}),Object(w.jsx)(A.a,{align:"right",children:e.first_name}),Object(w.jsx)(A.a,{align:"right",children:e.last_name}),Object(w.jsx)(A.a,{align:"right",children:e.phone}),Object(w.jsx)(A.a,{align:"right",children:e.email}),Object(w.jsx)(A.a,{align:"right",children:e.gender})]},e.id)}))})]})})})},B=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=Object(l.a)(c,2),d=i[0],x=i[1],p=Object(n.useState)(0),f=Object(l.a)(p,2),g=f[0],v=f[1],y=Object(n.useState)(!1),_=Object(l.a)(y,2),S=_[0],C=_[1],N=Object(n.useCallback)((function(e){r((function(t){return[].concat(Object(s.a)(t),[e])}))}),[]);return Object(n.useEffect)((function(){fetch("".concat(O,"?_page=",1,"&_limit=").concat(b)).then((function(e){if(!e.ok)throw new Error("error with db ".concat(e.statusText));var t=Number(e.headers.get("X-Total-Count"));C(t>g*b)})).catch((function(e){return x(e)}))}),[g]),Object(w.jsxs)("main",{className:"section",children:[Object(w.jsx)(E,{addUser:N}),""===d?Object(w.jsxs)(h.a,{pageStart:1,loadMore:function(){m("?_page=".concat(g+1,"&_limit=").concat(b)).then((function(e){r((function(t){return[].concat(Object(s.a)(t),Object(s.a)(e))}))})).catch((function(e){return x(e)})).finally((function(){return v((function(e){return e+1}))}))},hasMore:S,loader:Object(w.jsx)(o.a,{sx:{display:"flex",margin:"20px",alignItems:"center",justifyContent:"center"},children:Object(w.jsx)(j.a,{})},"".concat(g*b)),children:[Object(w.jsx)(u.a,{variant:"h6",gutterBottom:!0,children:"All our fake users:"}),Object(w.jsx)(P,{users:a})]}):Object(w.jsxs)(u.a,{variant:"h5",gutterBottom:!0,children:["Error:",d]})]})};i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(B,{})}),document.getElementById("root"))},95:function(e,t,a){},99:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.751d42c2.chunk.js.map